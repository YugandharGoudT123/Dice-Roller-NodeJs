<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Dice API Test Page</title>
</head>
<body>
    <h1>Server API Smoke Tests</h1>

    <button onclick="ping()">/api/ping</button>
    <button onclick="roll()">/api/roll</button>
    <button onclick="rollNoCors()">/api/roll-nocors</button>

    <pre id="out"></pre>

    <script>
        async function ping() {
            const res = await fetch('/api/ping');
            document.getElementById('out').textContent =
                JSON.stringify(await res.json(), null, 2);
        }

        async function roll() {
            const res = await fetch('/api/roll?sides=6&count=2');
            document.getElementById('out').textContent =
                JSON.stringify(await res.json(), null, 2);
        }

        async function rollNoCors() {
            try {
                const res = await fetch('/api/roll-nocors?sides=6&count=2');
                document.getElementById('out').textContent =
                    JSON.stringify(await res.json(), null, 2);
            } catch (e) {
                document.getElementById('out').textContent =
                    'Expected CORS failure: ' + e;
            }
        }
    </script>
</body>
</html>
